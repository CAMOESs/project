<%= form_with(model: message, local: true) do |form| %>
  <% if message.errors.any? %>
    <div id="error_explanation", class="alert">
      <h2><%= pluralize(message.errors.count, "error") %>interdit l'enregistrement de ce message :</h2>

      <ul>
        <% message.errors.full_messages.each do |message| %>
          <%if message.include?("Messages") %>
            <li class="_list">Le Messages ne peut pas être vide</li>
          <% end %>
          <%if message.include?("Email") %>
            <li class="_list">email ne peut pas être vide</li>
          <% end %>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    
    <% if current_user %>
    <%= form.label :"Entrez votre message" %><br/>
      <%= form.email_field :email, autofocus: true, autocomplete: "email", value: current_user.email, type: "hidden" %>
    <% else %>
     <%= form.label :email %><br/>
      <%= form.email_field :email, autofocus: true, autocomplete: "email", placeholder: "email" %>
    <% end %>
  </div>

  <div class="field">
    <%= form.label :messages %><br/>
    <%= form.text_area :messages, class:"field area", placeholder:"message" %>
  </div>

  <div class="actions">
    <%= form.submit "Envoyez" %>
  </div>
<% end %>
